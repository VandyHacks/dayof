{"id":"Y7Hr","dependencies":[{"name":"C:\\Users\\kzhai\\VandyHacks\\vandyhacksnotifications\\package.json","includedInParent":true,"mtime":1540882116534},{"name":"C:\\Users\\kzhai\\VandyHacks\\vandyhacksnotifications\\.babelrc","includedInParent":true,"mtime":1540875229523},{"name":"C:\\Users\\kzhai\\VandyHacks\\vandyhacksnotifications\\node_modules\\web-push\\package.json","includedInParent":true,"mtime":1539064513255},{"name":"crypto","loc":{"line":3,"column":23},"parent":"C:\\Users\\kzhai\\VandyHacks\\vandyhacksnotifications\\node_modules\\web-push\\src\\encryption-helper.js","resolved":"C:\\Users\\kzhai\\VandyHacks\\vandyhacksnotifications\\node_modules\\crypto-browserify\\index.js"},{"name":"http_ece","loc":{"line":4,"column":20},"parent":"C:\\Users\\kzhai\\VandyHacks\\vandyhacksnotifications\\node_modules\\web-push\\src\\encryption-helper.js","resolved":"C:\\Users\\kzhai\\VandyHacks\\vandyhacksnotifications\\node_modules\\http_ece\\ece.js"},{"name":"urlsafe-base64","loc":{"line":5,"column":26},"parent":"C:\\Users\\kzhai\\VandyHacks\\vandyhacksnotifications\\node_modules\\web-push\\src\\encryption-helper.js","resolved":"C:\\Users\\kzhai\\VandyHacks\\vandyhacksnotifications\\node_modules\\urlsafe-base64\\index.js"},{"name":"buffer","parent":"C:\\Users\\kzhai\\VandyHacks\\vandyhacksnotifications\\node_modules\\web-push\\src\\encryption-helper.js","resolved":"C:\\Users\\kzhai\\VandyHacks\\vandyhacksnotifications\\node_modules\\buffer\\index.js"}],"generated":{"js":"var Buffer = require(\"buffer\").Buffer;\nvar e=require(\"buffer\").Buffer;const r=require(\"crypto\"),t=require(\"http_ece\"),o=require(\"urlsafe-base64\"),i=function(i,n,s,u){if(!i)throw new Error(\"No user public key provided for encryption.\");if(\"string\"!=typeof i)throw new Error(\"The subscription p256dh value must be a string.\");if(65!==o.decode(i).length)throw new Error(\"The subscription p256dh value should be 65 bytes long.\");if(!n)throw new Error(\"No user auth provided for encryption.\");if(\"string\"!=typeof n)throw new Error(\"The subscription auth key must be a string.\");if(o.decode(n).length<16)throw new Error(\"The subscription auth key should be at least 16 bytes long\");if(\"string\"!=typeof s&&!e.isBuffer(s))throw new Error(\"Payload must be either a string or a Node Buffer.\");(\"string\"==typeof s||s instanceof String)&&(s=new e(s));const a=r.createECDH(\"prime256v1\"),h=a.generateKeys(),f=o.encode(r.randomBytes(16));return{localPublicKey:h,salt:f,cipherText:t.encrypt(s,{version:u,dh:i,privateKey:a,salt:f,authSecret:n})}};module.exports={encrypt:i};","map":{"mappings":[{"source":"node_modules/web-push/src/encryption-helper.js","original":{"line":61,"column":0},"generated":{"line":2,"column":0}},{"source":"node_modules/web-push/src/encryption-helper.js","original":{"line":61,"column":0},"generated":{"line":2,"column":4}},{"source":"node_modules/web-push/src/encryption-helper.js","original":{"line":61,"column":0},"generated":{"line":2,"column":6}},{"source":"node_modules/web-push/src/encryption-helper.js","original":{"line":61,"column":0},"generated":{"line":2,"column":14}},{"source":"node_modules/web-push/src/encryption-helper.js","original":{"line":61,"column":0},"generated":{"line":2,"column":24}},{"source":"node_modules/web-push/src/encryption-helper.js","original":{"line":3,"column":0},"generated":{"line":2,"column":31}},{"source":"node_modules/web-push/src/encryption-helper.js","name":"crypto","original":{"line":3,"column":6},"generated":{"line":2,"column":37}},{"source":"node_modules/web-push/src/encryption-helper.js","name":"require","original":{"line":3,"column":15},"generated":{"line":2,"column":39}},{"source":"node_modules/web-push/src/encryption-helper.js","original":{"line":3,"column":23},"generated":{"line":2,"column":47}},{"source":"node_modules/web-push/src/encryption-helper.js","name":"ece","original":{"line":4,"column":6},"generated":{"line":2,"column":57}},{"source":"node_modules/web-push/src/encryption-helper.js","name":"require","original":{"line":4,"column":12},"generated":{"line":2,"column":59}},{"source":"node_modules/web-push/src/encryption-helper.js","original":{"line":4,"column":20},"generated":{"line":2,"column":67}},{"source":"node_modules/web-push/src/encryption-helper.js","name":"urlBase64","original":{"line":5,"column":6},"generated":{"line":2,"column":79}},{"source":"node_modules/web-push/src/encryption-helper.js","name":"require","original":{"line":5,"column":18},"generated":{"line":2,"column":81}},{"source":"node_modules/web-push/src/encryption-helper.js","original":{"line":5,"column":26},"generated":{"line":2,"column":89}},{"source":"node_modules/web-push/src/encryption-helper.js","name":"encrypt","original":{"line":7,"column":6},"generated":{"line":2,"column":107}},{"source":"node_modules/web-push/src/encryption-helper.js","original":{"line":7,"column":16},"generated":{"line":2,"column":109}},{"source":"node_modules/web-push/src/encryption-helper.js","name":"userPublicKey","original":{"line":7,"column":25},"generated":{"line":2,"column":118}},{"source":"node_modules/web-push/src/encryption-helper.js","name":"userAuth","original":{"line":7,"column":40},"generated":{"line":2,"column":120}},{"source":"node_modules/web-push/src/encryption-helper.js","name":"payload","original":{"line":7,"column":50},"generated":{"line":2,"column":122}},{"source":"node_modules/web-push/src/encryption-helper.js","name":"contentEncoding","original":{"line":7,"column":59},"generated":{"line":2,"column":124}},{"source":"node_modules/web-push/src/encryption-helper.js","original":{"line":8,"column":6},"generated":{"line":2,"column":127}},{"source":"node_modules/web-push/src/encryption-helper.js","name":"userPublicKey","original":{"line":8,"column":7},"generated":{"line":2,"column":131}},{"source":"node_modules/web-push/src/encryption-helper.js","original":{"line":9,"column":10},"generated":{"line":2,"column":133}},{"source":"node_modules/web-push/src/encryption-helper.js","original":{"line":9,"column":10},"generated":{"line":2,"column":139}},{"source":"node_modules/web-push/src/encryption-helper.js","name":"Error","original":{"line":9,"column":14},"generated":{"line":2,"column":143}},{"source":"node_modules/web-push/src/encryption-helper.js","original":{"line":9,"column":20},"generated":{"line":2,"column":149}},{"source":"node_modules/web-push/src/encryption-helper.js","original":{"line":12,"column":6},"generated":{"line":2,"column":196}},{"source":"node_modules/web-push/src/encryption-helper.js","original":{"line":12,"column":31},"generated":{"line":2,"column":199}},{"source":"node_modules/web-push/src/encryption-helper.js","name":"userPublicKey","original":{"line":12,"column":13},"generated":{"line":2,"column":216}},{"source":"node_modules/web-push/src/encryption-helper.js","original":{"line":13,"column":10},"generated":{"line":2,"column":218}},{"source":"node_modules/web-push/src/encryption-helper.js","original":{"line":13,"column":10},"generated":{"line":2,"column":224}},{"source":"node_modules/web-push/src/encryption-helper.js","name":"Error","original":{"line":13,"column":14},"generated":{"line":2,"column":228}},{"source":"node_modules/web-push/src/encryption-helper.js","original":{"line":13,"column":20},"generated":{"line":2,"column":234}},{"source":"node_modules/web-push/src/encryption-helper.js","name":"urlBase64","original":{"line":16,"column":6},"generated":{"line":2,"column":285}},{"source":"node_modules/web-push/src/encryption-helper.js","original":{"line":16,"column":49},"generated":{"line":2,"column":288}},{"source":"node_modules/web-push/src/encryption-helper.js","name":"urlBase64","original":{"line":16,"column":6},"generated":{"line":2,"column":293}},{"source":"node_modules/web-push/src/encryption-helper.js","name":"decode","original":{"line":16,"column":16},"generated":{"line":2,"column":295}},{"source":"node_modules/web-push/src/encryption-helper.js","name":"userPublicKey","original":{"line":16,"column":23},"generated":{"line":2,"column":302}},{"source":"node_modules/web-push/src/encryption-helper.js","name":"length","original":{"line":16,"column":38},"generated":{"line":2,"column":305}},{"source":"node_modules/web-push/src/encryption-helper.js","original":{"line":17,"column":10},"generated":{"line":2,"column":312}},{"source":"node_modules/web-push/src/encryption-helper.js","original":{"line":17,"column":10},"generated":{"line":2,"column":318}},{"source":"node_modules/web-push/src/encryption-helper.js","name":"Error","original":{"line":17,"column":14},"generated":{"line":2,"column":322}},{"source":"node_modules/web-push/src/encryption-helper.js","original":{"line":17,"column":20},"generated":{"line":2,"column":328}},{"source":"node_modules/web-push/src/encryption-helper.js","original":{"line":20,"column":6},"generated":{"line":2,"column":386}},{"source":"node_modules/web-push/src/encryption-helper.js","name":"userAuth","original":{"line":20,"column":7},"generated":{"line":2,"column":390}},{"source":"node_modules/web-push/src/encryption-helper.js","original":{"line":21,"column":10},"generated":{"line":2,"column":392}},{"source":"node_modules/web-push/src/encryption-helper.js","original":{"line":21,"column":10},"generated":{"line":2,"column":398}},{"source":"node_modules/web-push/src/encryption-helper.js","name":"Error","original":{"line":21,"column":14},"generated":{"line":2,"column":402}},{"source":"node_modules/web-push/src/encryption-helper.js","original":{"line":21,"column":20},"generated":{"line":2,"column":408}},{"source":"node_modules/web-push/src/encryption-helper.js","original":{"line":24,"column":6},"generated":{"line":2,"column":449}},{"source":"node_modules/web-push/src/encryption-helper.js","original":{"line":24,"column":26},"generated":{"line":2,"column":452}},{"source":"node_modules/web-push/src/encryption-helper.js","name":"userAuth","original":{"line":24,"column":13},"generated":{"line":2,"column":469}},{"source":"node_modules/web-push/src/encryption-helper.js","original":{"line":25,"column":10},"generated":{"line":2,"column":471}},{"source":"node_modules/web-push/src/encryption-helper.js","original":{"line":25,"column":10},"generated":{"line":2,"column":477}},{"source":"node_modules/web-push/src/encryption-helper.js","name":"Error","original":{"line":25,"column":14},"generated":{"line":2,"column":481}},{"source":"node_modules/web-push/src/encryption-helper.js","original":{"line":25,"column":20},"generated":{"line":2,"column":487}},{"source":"node_modules/web-push/src/encryption-helper.js","name":"urlBase64","original":{"line":28,"column":6},"generated":{"line":2,"column":534}},{"source":"node_modules/web-push/src/encryption-helper.js","name":"urlBase64","original":{"line":28,"column":6},"generated":{"line":2,"column":537}},{"source":"node_modules/web-push/src/encryption-helper.js","name":"decode","original":{"line":28,"column":16},"generated":{"line":2,"column":539}},{"source":"node_modules/web-push/src/encryption-helper.js","name":"userAuth","original":{"line":28,"column":23},"generated":{"line":2,"column":546}},{"source":"node_modules/web-push/src/encryption-helper.js","name":"length","original":{"line":28,"column":33},"generated":{"line":2,"column":549}},{"source":"node_modules/web-push/src/encryption-helper.js","original":{"line":28,"column":42},"generated":{"line":2,"column":556}},{"source":"node_modules/web-push/src/encryption-helper.js","original":{"line":29,"column":10},"generated":{"line":2,"column":559}},{"source":"node_modules/web-push/src/encryption-helper.js","original":{"line":29,"column":10},"generated":{"line":2,"column":565}},{"source":"node_modules/web-push/src/encryption-helper.js","name":"Error","original":{"line":29,"column":14},"generated":{"line":2,"column":569}},{"source":"node_modules/web-push/src/encryption-helper.js","original":{"line":29,"column":20},"generated":{"line":2,"column":575}},{"source":"node_modules/web-push/src/encryption-helper.js","original":{"line":33,"column":6},"generated":{"line":2,"column":637}},{"source":"node_modules/web-push/src/encryption-helper.js","original":{"line":33,"column":25},"generated":{"line":2,"column":640}},{"source":"node_modules/web-push/src/encryption-helper.js","name":"payload","original":{"line":33,"column":13},"generated":{"line":2,"column":657}},{"source":"node_modules/web-push/src/encryption-helper.js","name":"Buffer","original":{"line":33,"column":38},"generated":{"line":2,"column":661}},{"source":"node_modules/web-push/src/encryption-helper.js","name":"isBuffer","original":{"line":33,"column":45},"generated":{"line":2,"column":663}},{"source":"node_modules/web-push/src/encryption-helper.js","name":"payload","original":{"line":33,"column":54},"generated":{"line":2,"column":672}},{"source":"node_modules/web-push/src/encryption-helper.js","original":{"line":34,"column":10},"generated":{"line":2,"column":675}},{"source":"node_modules/web-push/src/encryption-helper.js","original":{"line":34,"column":10},"generated":{"line":2,"column":681}},{"source":"node_modules/web-push/src/encryption-helper.js","name":"Error","original":{"line":34,"column":14},"generated":{"line":2,"column":685}},{"source":"node_modules/web-push/src/encryption-helper.js","original":{"line":34,"column":20},"generated":{"line":2,"column":691}},{"source":"node_modules/web-push/src/encryption-helper.js","original":{"line":37,"column":25},"generated":{"line":2,"column":745}},{"source":"node_modules/web-push/src/encryption-helper.js","name":"payload","original":{"line":37,"column":13},"generated":{"line":2,"column":762}},{"source":"node_modules/web-push/src/encryption-helper.js","name":"payload","original":{"line":37,"column":37},"generated":{"line":2,"column":765}},{"source":"node_modules/web-push/src/encryption-helper.js","name":"String","original":{"line":37,"column":56},"generated":{"line":2,"column":778}},{"source":"node_modules/web-push/src/encryption-helper.js","name":"payload","original":{"line":38,"column":4},"generated":{"line":2,"column":788}},{"source":"node_modules/web-push/src/encryption-helper.js","original":{"line":38,"column":14},"generated":{"line":2,"column":790}},{"source":"node_modules/web-push/src/encryption-helper.js","name":"Buffer","original":{"line":38,"column":18},"generated":{"line":2,"column":794}},{"source":"node_modules/web-push/src/encryption-helper.js","name":"payload","original":{"line":38,"column":25},"generated":{"line":2,"column":796}},{"source":"node_modules/web-push/src/encryption-helper.js","name":"localCurve","original":{"line":41,"column":8},"generated":{"line":2,"column":800}},{"source":"node_modules/web-push/src/encryption-helper.js","name":"localCurve","original":{"line":41,"column":8},"generated":{"line":2,"column":806}},{"source":"node_modules/web-push/src/encryption-helper.js","name":"crypto","original":{"line":41,"column":21},"generated":{"line":2,"column":808}},{"source":"node_modules/web-push/src/encryption-helper.js","name":"createECDH","original":{"line":41,"column":28},"generated":{"line":2,"column":810}},{"source":"node_modules/web-push/src/encryption-helper.js","original":{"line":41,"column":39},"generated":{"line":2,"column":821}},{"source":"node_modules/web-push/src/encryption-helper.js","name":"localPublicKey","original":{"line":42,"column":8},"generated":{"line":2,"column":835}},{"source":"node_modules/web-push/src/encryption-helper.js","name":"localCurve","original":{"line":42,"column":25},"generated":{"line":2,"column":837}},{"source":"node_modules/web-push/src/encryption-helper.js","name":"generateKeys","original":{"line":42,"column":36},"generated":{"line":2,"column":839}},{"source":"node_modules/web-push/src/encryption-helper.js","name":"salt","original":{"line":44,"column":8},"generated":{"line":2,"column":854}},{"source":"node_modules/web-push/src/encryption-helper.js","name":"urlBase64","original":{"line":44,"column":15},"generated":{"line":2,"column":856}},{"source":"node_modules/web-push/src/encryption-helper.js","name":"encode","original":{"line":44,"column":25},"generated":{"line":2,"column":858}},{"source":"node_modules/web-push/src/encryption-helper.js","name":"crypto","original":{"line":44,"column":32},"generated":{"line":2,"column":865}},{"source":"node_modules/web-push/src/encryption-helper.js","name":"randomBytes","original":{"line":44,"column":39},"generated":{"line":2,"column":867}},{"source":"node_modules/web-push/src/encryption-helper.js","original":{"line":44,"column":51},"generated":{"line":2,"column":879}},{"source":"node_modules/web-push/src/encryption-helper.js","original":{"line":54,"column":9},"generated":{"line":2,"column":884}},{"source":"node_modules/web-push/src/encryption-helper.js","original":{"line":54,"column":9},"generated":{"line":2,"column":890}},{"source":"node_modules/web-push/src/encryption-helper.js","name":"localPublicKey","original":{"line":55,"column":4},"generated":{"line":2,"column":891}},{"source":"node_modules/web-push/src/encryption-helper.js","name":"localPublicKey","original":{"line":55,"column":20},"generated":{"line":2,"column":906}},{"source":"node_modules/web-push/src/encryption-helper.js","name":"salt","original":{"line":56,"column":4},"generated":{"line":2,"column":908}},{"source":"node_modules/web-push/src/encryption-helper.js","name":"salt","original":{"line":56,"column":10},"generated":{"line":2,"column":913}},{"source":"node_modules/web-push/src/encryption-helper.js","name":"cipherText","original":{"line":57,"column":4},"generated":{"line":2,"column":915}},{"source":"node_modules/web-push/src/encryption-helper.js","name":"ece","original":{"line":46,"column":21},"generated":{"line":2,"column":926}},{"source":"node_modules/web-push/src/encryption-helper.js","name":"encrypt","original":{"line":46,"column":25},"generated":{"line":2,"column":928}},{"source":"node_modules/web-push/src/encryption-helper.js","name":"payload","original":{"line":46,"column":33},"generated":{"line":2,"column":936}},{"source":"node_modules/web-push/src/encryption-helper.js","original":{"line":46,"column":42},"generated":{"line":2,"column":938}},{"source":"node_modules/web-push/src/encryption-helper.js","name":"version","original":{"line":47,"column":4},"generated":{"line":2,"column":939}},{"source":"node_modules/web-push/src/encryption-helper.js","name":"contentEncoding","original":{"line":47,"column":13},"generated":{"line":2,"column":947}},{"source":"node_modules/web-push/src/encryption-helper.js","name":"dh","original":{"line":48,"column":4},"generated":{"line":2,"column":949}},{"source":"node_modules/web-push/src/encryption-helper.js","name":"userPublicKey","original":{"line":48,"column":8},"generated":{"line":2,"column":952}},{"source":"node_modules/web-push/src/encryption-helper.js","name":"privateKey","original":{"line":49,"column":4},"generated":{"line":2,"column":954}},{"source":"node_modules/web-push/src/encryption-helper.js","name":"localCurve","original":{"line":49,"column":16},"generated":{"line":2,"column":965}},{"source":"node_modules/web-push/src/encryption-helper.js","name":"salt","original":{"line":50,"column":4},"generated":{"line":2,"column":967}},{"source":"node_modules/web-push/src/encryption-helper.js","name":"salt","original":{"line":50,"column":10},"generated":{"line":2,"column":972}},{"source":"node_modules/web-push/src/encryption-helper.js","name":"authSecret","original":{"line":51,"column":4},"generated":{"line":2,"column":974}},{"source":"node_modules/web-push/src/encryption-helper.js","name":"userAuth","original":{"line":51,"column":16},"generated":{"line":2,"column":985}},{"source":"node_modules/web-push/src/encryption-helper.js","name":"module","original":{"line":61,"column":0},"generated":{"line":2,"column":991}},{"source":"node_modules/web-push/src/encryption-helper.js","name":"exports","original":{"line":61,"column":7},"generated":{"line":2,"column":998}},{"source":"node_modules/web-push/src/encryption-helper.js","original":{"line":61,"column":17},"generated":{"line":2,"column":1006}},{"source":"node_modules/web-push/src/encryption-helper.js","name":"encrypt","original":{"line":62,"column":2},"generated":{"line":2,"column":1007}},{"source":"node_modules/web-push/src/encryption-helper.js","name":"encrypt","original":{"line":62,"column":11},"generated":{"line":2,"column":1015}}],"sources":{"node_modules/web-push/src/encryption-helper.js":"'use strict';\n\nconst crypto = require('crypto');\nconst ece = require('http_ece');\nconst urlBase64 = require('urlsafe-base64');\n\nconst encrypt = function(userPublicKey, userAuth, payload, contentEncoding) {\n  if (!userPublicKey) {\n    throw new Error('No user public key provided for encryption.');\n  }\n\n  if (typeof userPublicKey !== 'string') {\n    throw new Error('The subscription p256dh value must be a string.');\n  }\n\n  if (urlBase64.decode(userPublicKey).length !== 65) {\n    throw new Error('The subscription p256dh value should be 65 bytes long.');\n  }\n\n  if (!userAuth) {\n    throw new Error('No user auth provided for encryption.');\n  }\n\n  if (typeof userAuth !== 'string') {\n    throw new Error('The subscription auth key must be a string.');\n  }\n\n  if (urlBase64.decode(userAuth).length < 16) {\n    throw new Error('The subscription auth key should be at least 16 ' +\n      'bytes long');\n  }\n\n  if (typeof payload !== 'string' && !Buffer.isBuffer(payload)) {\n    throw new Error('Payload must be either a string or a Node Buffer.');\n  }\n\n  if (typeof payload === 'string' || payload instanceof String) {\n    payload = new Buffer(payload);\n  }\n\n  const localCurve = crypto.createECDH('prime256v1');\n  const localPublicKey = localCurve.generateKeys();\n\n  const salt = urlBase64.encode(crypto.randomBytes(16));\n\n  const cipherText = ece.encrypt(payload, {\n    version: contentEncoding,\n    dh: userPublicKey,\n    privateKey: localCurve,\n    salt: salt,\n    authSecret: userAuth\n  });\n\n  return {\n    localPublicKey: localPublicKey,\n    salt: salt,\n    cipherText: cipherText\n  };\n};\n\nmodule.exports = {\n  encrypt: encrypt\n};\n"},"lineCount":null}},"hash":"3fe95709c7b8cecd1d7ad5e61d9ae1e9","cacheData":{"env":{}}}