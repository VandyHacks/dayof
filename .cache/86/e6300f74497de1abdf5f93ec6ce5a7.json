{"id":"+DJH","dependencies":[{"name":"C:\\Users\\kzhai\\VandyHacks\\vandyhacksnotifications\\package.json","includedInParent":true,"mtime":1540882116534},{"name":"C:\\Users\\kzhai\\VandyHacks\\vandyhacksnotifications\\.babelrc","includedInParent":true,"mtime":1540875229523},{"name":"C:\\Users\\kzhai\\VandyHacks\\vandyhacksnotifications\\node_modules\\mongodb-core\\package.json","includedInParent":true,"mtime":1539064513292},{"name":"./error","loc":{"line":2,"column":27},"parent":"C:\\Users\\kzhai\\VandyHacks\\vandyhacksnotifications\\node_modules\\mongodb-core\\lib\\transactions.js","resolved":"C:\\Users\\kzhai\\VandyHacks\\vandyhacksnotifications\\node_modules\\mongodb-core\\lib\\error.js"}],"generated":{"js":"\"use strict\";const T=require(\"./error\").MongoError;let N,A;N={NO_TRANSACTION:\"NO_TRANSACTION\",STARTING_TRANSACTION:\"STARTING_TRANSACTION\",TRANSACTION_IN_PROGRESS:\"TRANSACTION_IN_PROGRESS\",TRANSACTION_COMMITTED:\"TRANSACTION_COMMITTED\",TRANSACTION_COMMITTED_EMPTY:\"TRANSACTION_COMMITTED_EMPTY\",TRANSACTION_ABORTED:\"TRANSACTION_ABORTED\"},A={NO_TRANSACTION:[\"NO_TRANSACTION\",\"STARTING_TRANSACTION\"],STARTING_TRANSACTION:[\"TRANSACTION_IN_PROGRESS\",\"TRANSACTION_COMMITTED\",\"TRANSACTION_COMMITTED_EMPTY\",\"TRANSACTION_ABORTED\"],TRANSACTION_IN_PROGRESS:[\"TRANSACTION_IN_PROGRESS\",\"TRANSACTION_COMMITTED\",\"TRANSACTION_ABORTED\"],TRANSACTION_COMMITTED:[\"TRANSACTION_COMMITTED\",\"TRANSACTION_COMMITTED_EMPTY\",\"STARTING_TRANSACTION\",\"NO_TRANSACTION\"],TRANSACTION_ABORTED:[\"STARTING_TRANSACTION\",\"NO_TRANSACTION\"],TRANSACTION_COMMITTED_EMPTY:[\"TRANSACTION_COMMITTED_EMPTY\",\"NO_TRANSACTION\"]};class O{constructor(A){if(A=A||{},this.state=N.NO_TRANSACTION,this.options={},A.writeConcern||void 0!==A.w){if((A.writeConcern?A.writeConcern.w:A.w)<=0)throw new T(\"Transactions do not support unacknowledged write concern\");this.options.writeConcern=A.writeConcern?A.writeConcern:{w:A.w}}A.readConcern&&(this.options.readConcern=A.readConcern),A.readPreference&&(this.options.readPreference=A.readPreference)}get isActive(){return-1!==[N.STARTING_TRANSACTION,N.TRANSACTION_IN_PROGRESS].indexOf(this.state)}transition(N){const O=A[this.state];if(!O||-1===O.indexOf(N))throw new T(`Attempted illegal state transition from [${this.state}] to [${N}]`);this.state=N}}module.exports={TxnState:N,Transaction:O};","map":{"mappings":[{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":2,"column":0},"generated":{"line":1,"column":13}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":2,"column":0},"generated":{"line":1,"column":19}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":2,"column":0},"generated":{"line":1,"column":21}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":2,"column":0},"generated":{"line":1,"column":29}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":2,"column":0},"generated":{"line":1,"column":40}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":4,"column":0},"generated":{"line":1,"column":51}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":4,"column":0},"generated":{"line":1,"column":55}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":5,"column":0},"generated":{"line":1,"column":57}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":15,"column":0},"generated":{"line":1,"column":59}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":15,"column":0},"generated":{"line":1,"column":61}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":16,"column":0},"generated":{"line":1,"column":62}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":8,"column":0},"generated":{"line":1,"column":77}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":17,"column":0},"generated":{"line":1,"column":94}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":9,"column":0},"generated":{"line":1,"column":115}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":18,"column":0},"generated":{"line":1,"column":138}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":10,"column":0},"generated":{"line":1,"column":162}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":19,"column":0},"generated":{"line":1,"column":188}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":11,"column":0},"generated":{"line":1,"column":210}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":20,"column":0},"generated":{"line":1,"column":234}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":12,"column":0},"generated":{"line":1,"column":262}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":21,"column":0},"generated":{"line":1,"column":292}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":13,"column":0},"generated":{"line":1,"column":312}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":24,"column":0},"generated":{"line":1,"column":335}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":24,"column":0},"generated":{"line":1,"column":337}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":25,"column":0},"generated":{"line":1,"column":338}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":25,"column":0},"generated":{"line":1,"column":353}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":8,"column":0},"generated":{"line":1,"column":354}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":9,"column":0},"generated":{"line":1,"column":371}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":26,"column":0},"generated":{"line":1,"column":395}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":26,"column":0},"generated":{"line":1,"column":416}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":10,"column":0},"generated":{"line":1,"column":417}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":11,"column":0},"generated":{"line":1,"column":443}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":12,"column":0},"generated":{"line":1,"column":467}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":13,"column":0},"generated":{"line":1,"column":497}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":32,"column":0},"generated":{"line":1,"column":520}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":32,"column":0},"generated":{"line":1,"column":544}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":10,"column":0},"generated":{"line":1,"column":545}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":11,"column":0},"generated":{"line":1,"column":571}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":13,"column":0},"generated":{"line":1,"column":595}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":37,"column":0},"generated":{"line":1,"column":618}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":37,"column":0},"generated":{"line":1,"column":640}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":11,"column":0},"generated":{"line":1,"column":641}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":12,"column":0},"generated":{"line":1,"column":665}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":9,"column":0},"generated":{"line":1,"column":695}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":8,"column":0},"generated":{"line":1,"column":718}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":43,"column":0},"generated":{"line":1,"column":736}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":43,"column":0},"generated":{"line":1,"column":756}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":9,"column":0},"generated":{"line":1,"column":757}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":8,"column":0},"generated":{"line":1,"column":780}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":44,"column":0},"generated":{"line":1,"column":798}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":44,"column":0},"generated":{"line":1,"column":826}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":12,"column":0},"generated":{"line":1,"column":827}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":8,"column":0},"generated":{"line":1,"column":857}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":51,"column":0},"generated":{"line":1,"column":876}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":51,"column":0},"generated":{"line":1,"column":882}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":60,"column":0},"generated":{"line":1,"column":884}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":60,"column":0},"generated":{"line":1,"column":896}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":66,"column":0},"generated":{"line":1,"column":899}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":61,"column":0},"generated":{"line":1,"column":902}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":61,"column":0},"generated":{"line":1,"column":904}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":61,"column":0},"generated":{"line":1,"column":907}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":63,"column":0},"generated":{"line":1,"column":910}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":63,"column":0},"generated":{"line":1,"column":915}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":63,"column":0},"generated":{"line":1,"column":921}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":63,"column":0},"generated":{"line":1,"column":923}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":64,"column":0},"generated":{"line":1,"column":938}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":64,"column":0},"generated":{"line":1,"column":943}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":64,"column":0},"generated":{"line":1,"column":951}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":66,"column":0},"generated":{"line":1,"column":954}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":66,"column":0},"generated":{"line":1,"column":956}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":66,"column":0},"generated":{"line":1,"column":975}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":66,"column":0},"generated":{"line":1,"column":979}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":66,"column":0},"generated":{"line":1,"column":981}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":66,"column":0},"generated":{"line":1,"column":983}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":68,"column":0},"generated":{"line":1,"column":984}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":67,"column":0},"generated":{"line":1,"column":988}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":67,"column":0},"generated":{"line":1,"column":990}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":67,"column":0},"generated":{"line":1,"column":1003}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":67,"column":0},"generated":{"line":1,"column":1005}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":67,"column":0},"generated":{"line":1,"column":1018}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":67,"column":0},"generated":{"line":1,"column":1020}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":67,"column":0},"generated":{"line":1,"column":1022}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":68,"column":0},"generated":{"line":1,"column":1026}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":69,"column":0},"generated":{"line":1,"column":1028}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":69,"column":0},"generated":{"line":1,"column":1034}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":69,"column":0},"generated":{"line":1,"column":1038}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":69,"column":0},"generated":{"line":1,"column":1040}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":72,"column":0},"generated":{"line":1,"column":1100}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":72,"column":0},"generated":{"line":1,"column":1105}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":72,"column":0},"generated":{"line":1,"column":1113}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":72,"column":0},"generated":{"line":1,"column":1126}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":72,"column":0},"generated":{"line":1,"column":1128}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":72,"column":0},"generated":{"line":1,"column":1141}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":72,"column":0},"generated":{"line":1,"column":1143}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":72,"column":0},"generated":{"line":1,"column":1156}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":72,"column":0},"generated":{"line":1,"column":1157}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":72,"column":0},"generated":{"line":1,"column":1159}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":72,"column":0},"generated":{"line":1,"column":1161}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":75,"column":0},"generated":{"line":1,"column":1164}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":75,"column":0},"generated":{"line":1,"column":1166}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":75,"column":0},"generated":{"line":1,"column":1180}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":75,"column":0},"generated":{"line":1,"column":1185}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":75,"column":0},"generated":{"line":1,"column":1193}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":75,"column":0},"generated":{"line":1,"column":1205}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":75,"column":0},"generated":{"line":1,"column":1207}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":76,"column":0},"generated":{"line":1,"column":1220}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":76,"column":0},"generated":{"line":1,"column":1222}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":76,"column":0},"generated":{"line":1,"column":1239}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":76,"column":0},"generated":{"line":1,"column":1244}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":76,"column":0},"generated":{"line":1,"column":1252}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":76,"column":0},"generated":{"line":1,"column":1267}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":76,"column":0},"generated":{"line":1,"column":1269}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":82,"column":0},"generated":{"line":1,"column":1285}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":83,"column":0},"generated":{"line":1,"column":1300}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":84,"column":0},"generated":{"line":1,"column":1307}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":84,"column":0},"generated":{"line":1,"column":1311}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":84,"column":0},"generated":{"line":1,"column":1312}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":84,"column":0},"generated":{"line":1,"column":1314}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":84,"column":0},"generated":{"line":1,"column":1335}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":84,"column":0},"generated":{"line":1,"column":1337}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":84,"column":0},"generated":{"line":1,"column":1362}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":84,"column":0},"generated":{"line":1,"column":1370}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":84,"column":0},"generated":{"line":1,"column":1375}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":93,"column":0},"generated":{"line":1,"column":1382}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":93,"column":0},"generated":{"line":1,"column":1393}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":94,"column":0},"generated":{"line":1,"column":1396}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":94,"column":0},"generated":{"line":1,"column":1402}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":94,"column":0},"generated":{"line":1,"column":1404}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":94,"column":0},"generated":{"line":1,"column":1406}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":94,"column":0},"generated":{"line":1,"column":1411}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":95,"column":0},"generated":{"line":1,"column":1418}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":95,"column":0},"generated":{"line":1,"column":1422}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":95,"column":0},"generated":{"line":1,"column":1426}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":95,"column":0},"generated":{"line":1,"column":1430}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":95,"column":0},"generated":{"line":1,"column":1432}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":95,"column":0},"generated":{"line":1,"column":1440}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":100,"column":0},"generated":{"line":1,"column":1443}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":100,"column":0},"generated":{"line":1,"column":1449}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":100,"column":0},"generated":{"line":1,"column":1453}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":101,"column":0},"generated":{"line":1,"column":1499}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":101,"column":0},"generated":{"line":1,"column":1504}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":101,"column":0},"generated":{"line":1,"column":1518}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":96,"column":0},"generated":{"line":1,"column":1524}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":96,"column":0},"generated":{"line":1,"column":1529}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":96,"column":0},"generated":{"line":1,"column":1535}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":106,"column":0},"generated":{"line":1,"column":1538}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":106,"column":0},"generated":{"line":1,"column":1545}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":106,"column":0},"generated":{"line":1,"column":1553}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":106,"column":0},"generated":{"line":1,"column":1554}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":106,"column":0},"generated":{"line":1,"column":1563}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":106,"column":0},"generated":{"line":1,"column":1565}},{"source":"node_modules/mongodb-core/lib/transactions.js","original":{"line":106,"column":0},"generated":{"line":1,"column":1577}}],"sources":{"node_modules/mongodb-core/lib/transactions.js":"'use strict';\nconst MongoError = require('./error').MongoError;\n\nlet TxnState;\nlet stateMachine;\n\n(() => {\n  const NO_TRANSACTION = 'NO_TRANSACTION';\n  const STARTING_TRANSACTION = 'STARTING_TRANSACTION';\n  const TRANSACTION_IN_PROGRESS = 'TRANSACTION_IN_PROGRESS';\n  const TRANSACTION_COMMITTED = 'TRANSACTION_COMMITTED';\n  const TRANSACTION_COMMITTED_EMPTY = 'TRANSACTION_COMMITTED_EMPTY';\n  const TRANSACTION_ABORTED = 'TRANSACTION_ABORTED';\n\n  TxnState = {\n    NO_TRANSACTION,\n    STARTING_TRANSACTION,\n    TRANSACTION_IN_PROGRESS,\n    TRANSACTION_COMMITTED,\n    TRANSACTION_COMMITTED_EMPTY,\n    TRANSACTION_ABORTED\n  };\n\n  stateMachine = {\n    [NO_TRANSACTION]: [NO_TRANSACTION, STARTING_TRANSACTION],\n    [STARTING_TRANSACTION]: [\n      TRANSACTION_IN_PROGRESS,\n      TRANSACTION_COMMITTED,\n      TRANSACTION_COMMITTED_EMPTY,\n      TRANSACTION_ABORTED\n    ],\n    [TRANSACTION_IN_PROGRESS]: [\n      TRANSACTION_IN_PROGRESS,\n      TRANSACTION_COMMITTED,\n      TRANSACTION_ABORTED\n    ],\n    [TRANSACTION_COMMITTED]: [\n      TRANSACTION_COMMITTED,\n      TRANSACTION_COMMITTED_EMPTY,\n      STARTING_TRANSACTION,\n      NO_TRANSACTION\n    ],\n    [TRANSACTION_ABORTED]: [STARTING_TRANSACTION, NO_TRANSACTION],\n    [TRANSACTION_COMMITTED_EMPTY]: [TRANSACTION_COMMITTED_EMPTY, NO_TRANSACTION]\n  };\n})();\n\n/**\n * A class maintaining state related to a server transaction\n */\nclass Transaction {\n  /**\n   * Create a transaction\n   *\n   * @param {object} [options] Optional settings\n   * @param {string} [options.readConcern] A default read concern for commands in this transaction\n   * @param {object} [options.writeConcern] A default write concern for commands in this transaction\n   * @param {ReadPreference} [options.readPreference] A default read preference for commands in this transaction\n   */\n  constructor(options) {\n    options = options || {};\n\n    this.state = TxnState.NO_TRANSACTION;\n    this.options = {};\n\n    if (options.writeConcern || typeof options.w !== 'undefined') {\n      const w = options.writeConcern ? options.writeConcern.w : options.w;\n      if (w <= 0) {\n        throw new MongoError('Transactions do not support unacknowledged write concern');\n      }\n\n      this.options.writeConcern = options.writeConcern ? options.writeConcern : { w: options.w };\n    }\n\n    if (options.readConcern) this.options.readConcern = options.readConcern;\n    if (options.readPreference) this.options.readPreference = options.readPreference;\n  }\n\n  /**\n   * @return Whether this session is presently in a transaction\n   */\n  get isActive() {\n    return (\n      [TxnState.STARTING_TRANSACTION, TxnState.TRANSACTION_IN_PROGRESS].indexOf(this.state) !== -1\n    );\n  }\n\n  /**\n   * Transition the transaction in the state machine\n   *\n   * @param {TxnState} state The new state to transition to\n   */\n  transition(nextState) {\n    const nextStates = stateMachine[this.state];\n    if (nextStates && nextStates.indexOf(nextState) !== -1) {\n      this.state = nextState;\n      return;\n    }\n\n    throw new MongoError(\n      `Attempted illegal state transition from [${this.state}] to [${nextState}]`\n    );\n  }\n}\n\nmodule.exports = { TxnState, Transaction };\n"},"lineCount":null}},"hash":"617fa41b33a0a42e64bfa42976887825","cacheData":{"env":{}}}