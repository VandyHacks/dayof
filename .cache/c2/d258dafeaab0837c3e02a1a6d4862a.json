{"id":"pvvq","dependencies":[{"name":"C:\\Users\\kzhai\\VandyHacks\\vandyhacksnotifications\\package.json","includedInParent":true,"mtime":1540882116534},{"name":"C:\\Users\\kzhai\\VandyHacks\\vandyhacksnotifications\\.babelrc","includedInParent":true,"mtime":1540875229523},{"name":"C:\\Users\\kzhai\\VandyHacks\\vandyhacksnotifications\\node_modules\\mongodb-core\\package.json","includedInParent":true,"mtime":1539064513292},{"name":"util","loc":{"line":3,"column":16},"parent":"C:\\Users\\kzhai\\VandyHacks\\vandyhacksnotifications\\node_modules\\mongodb-core\\lib\\auth\\plain.js","resolved":"C:\\Users\\kzhai\\VandyHacks\\vandyhacksnotifications\\node_modules\\util\\util.js"},{"name":"../connection/utils","loc":{"line":4,"column":25},"parent":"C:\\Users\\kzhai\\VandyHacks\\vandyhacksnotifications\\node_modules\\mongodb-core\\lib\\auth\\plain.js","resolved":"C:\\Users\\kzhai\\VandyHacks\\vandyhacksnotifications\\node_modules\\mongodb-core\\lib\\connection\\utils.js"},{"name":"../connection/commands","loc":{"line":5,"column":18},"parent":"C:\\Users\\kzhai\\VandyHacks\\vandyhacksnotifications\\node_modules\\mongodb-core\\lib\\auth\\plain.js","resolved":"C:\\Users\\kzhai\\VandyHacks\\vandyhacksnotifications\\node_modules\\mongodb-core\\lib\\connection\\commands.js"},{"name":"../error","loc":{"line":6,"column":23},"parent":"C:\\Users\\kzhai\\VandyHacks\\vandyhacksnotifications\\node_modules\\mongodb-core\\lib\\auth\\plain.js","resolved":"C:\\Users\\kzhai\\VandyHacks\\vandyhacksnotifications\\node_modules\\mongodb-core\\lib\\error.js"},{"name":"process","parent":"C:\\Users\\kzhai\\VandyHacks\\vandyhacksnotifications\\node_modules\\mongodb-core\\lib\\auth\\plain.js","resolved":"C:\\Users\\kzhai\\VandyHacks\\vandyhacksnotifications\\node_modules\\process\\browser.js"}],"generated":{"js":"var process = require(\"process\");\nvar t=require(\"process\"),r=require(\"util\").format,e=require(\"../connection/utils\").retrieveBSON,n=require(\"../connection/commands\").Query,u=require(\"../error\").MongoError,o=e(),i=o.Binary,s=function(t,r,e){this.db=t,this.username=r,this.password=e};s.prototype.equal=function(t){return t.db===this.db&&t.username===this.username&&t.password===this.password};var a=function(t){this.bson=t,this.authStore=[]};a.prototype.auth=function(e,o,a,h,c,f){var p=this,m=o.length;if(0===m)return f(null,null);for(var d=0,b=null;o.length>0;){!function(o){t.nextTick(function(){var t,g;t=o,g={saslStart:1,mechanism:\"PLAIN\",payload:new i(r(\"\\0%s\\0%s\",h,c)),autoAuthorize:1},e(t,new n(p.bson,\"$external.$cmd\",g,{numberToSkip:0,numberToReturn:1}),function(t,e){m-=1,t?b=t:e.result.$err?b=e.result:e.result.errmsg?b=e.result:d+=1,0===m&&d>0?(l(p.authStore,new s(a,h,c)),f(null,!0)):0===m&&(null==b&&(b=new u(r(\"failed to authenticate using mongocr\"))),f(b,!1))})})}(o.shift())}};var l=function(t,r){for(var e=!1,n=0;n<t.length;n++)if(t[n].equal(r)){e=!0;break}e||t.push(r)};a.prototype.logout=function(t){this.authStore=this.authStore.filter(function(r){return r.db!==t})},a.prototype.reauthenticate=function(t,r,e){var n=this.authStore.slice(0),u=n.length;if(0===u)return e(null,null);for(var o=0;o<n.length;o++)this.auth(t,r,n[o].db,n[o].username,n[o].password,function(t){0===(u-=1)&&e(t,null)})},module.exports=a;","map":{"mappings":[{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":184,"column":0},"generated":{"line":2,"column":0}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":184,"column":0},"generated":{"line":2,"column":4}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":184,"column":0},"generated":{"line":2,"column":6}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":184,"column":0},"generated":{"line":2,"column":14}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":3,"column":0},"generated":{"line":2,"column":25}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":3,"column":0},"generated":{"line":2,"column":27}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":3,"column":0},"generated":{"line":2,"column":35}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":3,"column":0},"generated":{"line":2,"column":43}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":4,"column":0},"generated":{"line":2,"column":50}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":4,"column":0},"generated":{"line":2,"column":52}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":4,"column":0},"generated":{"line":2,"column":60}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":4,"column":0},"generated":{"line":2,"column":83}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":5,"column":0},"generated":{"line":2,"column":96}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":5,"column":0},"generated":{"line":2,"column":98}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":5,"column":0},"generated":{"line":2,"column":106}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":5,"column":0},"generated":{"line":2,"column":132}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":6,"column":0},"generated":{"line":2,"column":138}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":6,"column":0},"generated":{"line":2,"column":140}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":6,"column":0},"generated":{"line":2,"column":148}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":6,"column":0},"generated":{"line":2,"column":160}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":8,"column":0},"generated":{"line":2,"column":171}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":8,"column":0},"generated":{"line":2,"column":173}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":9,"column":0},"generated":{"line":2,"column":177}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":9,"column":0},"generated":{"line":2,"column":179}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":9,"column":0},"generated":{"line":2,"column":181}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":11,"column":0},"generated":{"line":2,"column":188}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":11,"column":0},"generated":{"line":2,"column":190}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":11,"column":0},"generated":{"line":2,"column":199}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":11,"column":0},"generated":{"line":2,"column":201}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":11,"column":0},"generated":{"line":2,"column":203}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":12,"column":0},"generated":{"line":2,"column":206}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":12,"column":0},"generated":{"line":2,"column":211}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":12,"column":0},"generated":{"line":2,"column":214}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":13,"column":0},"generated":{"line":2,"column":216}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":13,"column":0},"generated":{"line":2,"column":221}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":13,"column":0},"generated":{"line":2,"column":230}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":14,"column":0},"generated":{"line":2,"column":232}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":14,"column":0},"generated":{"line":2,"column":237}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":14,"column":0},"generated":{"line":2,"column":246}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":17,"column":0},"generated":{"line":2,"column":249}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":17,"column":0},"generated":{"line":2,"column":251}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":17,"column":0},"generated":{"line":2,"column":261}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":17,"column":0},"generated":{"line":2,"column":267}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":17,"column":0},"generated":{"line":2,"column":276}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":18,"column":0},"generated":{"line":2,"column":279}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":19,"column":0},"generated":{"line":2,"column":286}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":19,"column":0},"generated":{"line":2,"column":288}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":19,"column":0},"generated":{"line":2,"column":293}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":19,"column":0},"generated":{"line":2,"column":298}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":20,"column":0},"generated":{"line":2,"column":302}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":20,"column":0},"generated":{"line":2,"column":304}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":20,"column":0},"generated":{"line":2,"column":315}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":20,"column":0},"generated":{"line":2,"column":320}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":21,"column":0},"generated":{"line":2,"column":330}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":21,"column":0},"generated":{"line":2,"column":332}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":21,"column":0},"generated":{"line":2,"column":343}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":21,"column":0},"generated":{"line":2,"column":348}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":30,"column":0},"generated":{"line":2,"column":358}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":30,"column":0},"generated":{"line":2,"column":362}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":30,"column":0},"generated":{"line":2,"column":364}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":30,"column":0},"generated":{"line":2,"column":373}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":31,"column":0},"generated":{"line":2,"column":376}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":31,"column":0},"generated":{"line":2,"column":381}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":31,"column":0},"generated":{"line":2,"column":386}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":32,"column":0},"generated":{"line":2,"column":388}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":32,"column":0},"generated":{"line":2,"column":393}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":32,"column":0},"generated":{"line":2,"column":403}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":46,"column":0},"generated":{"line":2,"column":407}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":46,"column":0},"generated":{"line":2,"column":409}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":46,"column":0},"generated":{"line":2,"column":419}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":46,"column":0},"generated":{"line":2,"column":424}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":46,"column":0},"generated":{"line":2,"column":433}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":46,"column":0},"generated":{"line":2,"column":435}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":46,"column":0},"generated":{"line":2,"column":437}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":46,"column":0},"generated":{"line":2,"column":439}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":46,"column":0},"generated":{"line":2,"column":441}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":46,"column":0},"generated":{"line":2,"column":443}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":47,"column":0},"generated":{"line":2,"column":446}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":47,"column":0},"generated":{"line":2,"column":450}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":47,"column":0},"generated":{"line":2,"column":452}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":49,"column":0},"generated":{"line":2,"column":457}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":49,"column":0},"generated":{"line":2,"column":459}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":49,"column":0},"generated":{"line":2,"column":461}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":50,"column":0},"generated":{"line":2,"column":468}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":50,"column":0},"generated":{"line":2,"column":471}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":50,"column":0},"generated":{"line":2,"column":475}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":50,"column":0},"generated":{"line":2,"column":477}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":50,"column":0},"generated":{"line":2,"column":484}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":50,"column":0},"generated":{"line":2,"column":486}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":50,"column":0},"generated":{"line":2,"column":491}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":57,"column":0},"generated":{"line":2,"column":497}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":53,"column":0},"generated":{"line":2,"column":501}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":53,"column":0},"generated":{"line":2,"column":505}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":53,"column":0},"generated":{"line":2,"column":507}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":54,"column":0},"generated":{"line":2,"column":509}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":54,"column":0},"generated":{"line":2,"column":511}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":57,"column":0},"generated":{"line":2,"column":516}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":57,"column":0},"generated":{"line":2,"column":518}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":57,"column":0},"generated":{"line":2,"column":525}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":57,"column":0},"generated":{"line":2,"column":528}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":108,"column":0},"generated":{"line":2,"column":530}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":108,"column":0},"generated":{"line":2,"column":539}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":109,"column":0},"generated":{"line":2,"column":542}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":109,"column":0},"generated":{"line":2,"column":544}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":109,"column":0},"generated":{"line":2,"column":553}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":59,"column":0},"generated":{"line":2,"column":564}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":59,"column":0},"generated":{"line":2,"column":568}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":64,"column":0},"generated":{"line":2,"column":570}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":59,"column":0},"generated":{"line":2,"column":572}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":110,"column":0},"generated":{"line":2,"column":574}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":64,"column":0},"generated":{"line":2,"column":576}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":64,"column":0},"generated":{"line":2,"column":578}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":65,"column":0},"generated":{"line":2,"column":579}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":65,"column":0},"generated":{"line":2,"column":589}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":66,"column":0},"generated":{"line":2,"column":591}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":66,"column":0},"generated":{"line":2,"column":601}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":67,"column":0},"generated":{"line":2,"column":609}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":61,"column":0},"generated":{"line":2,"column":617}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":61,"column":0},"generated":{"line":2,"column":621}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":61,"column":0},"generated":{"line":2,"column":623}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":61,"column":0},"generated":{"line":2,"column":625}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":61,"column":0},"generated":{"line":2,"column":636}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":61,"column":0},"generated":{"line":2,"column":638}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":68,"column":0},"generated":{"line":2,"column":642}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":68,"column":0},"generated":{"line":2,"column":656}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":72,"column":0},"generated":{"line":2,"column":659}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":73,"column":0},"generated":{"line":2,"column":661}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":74,"column":0},"generated":{"line":2,"column":663}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":74,"column":0},"generated":{"line":2,"column":667}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":74,"column":0},"generated":{"line":2,"column":669}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":74,"column":0},"generated":{"line":2,"column":671}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":74,"column":0},"generated":{"line":2,"column":676}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":74,"column":0},"generated":{"line":2,"column":693}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":74,"column":0},"generated":{"line":2,"column":695}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":75,"column":0},"generated":{"line":2,"column":696}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":75,"column":0},"generated":{"line":2,"column":709}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":76,"column":0},"generated":{"line":2,"column":711}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":76,"column":0},"generated":{"line":2,"column":726}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":78,"column":0},"generated":{"line":2,"column":730}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":78,"column":0},"generated":{"line":2,"column":739}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":78,"column":0},"generated":{"line":2,"column":741}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":80,"column":0},"generated":{"line":2,"column":744}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":80,"column":0},"generated":{"line":2,"column":747}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":83,"column":0},"generated":{"line":2,"column":749}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":84,"column":0},"generated":{"line":2,"column":751}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":84,"column":0},"generated":{"line":2,"column":753}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":85,"column":0},"generated":{"line":2,"column":755}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":85,"column":0},"generated":{"line":2,"column":757}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":85,"column":0},"generated":{"line":2,"column":764}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":86,"column":0},"generated":{"line":2,"column":769}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":86,"column":0},"generated":{"line":2,"column":771}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":86,"column":0},"generated":{"line":2,"column":773}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":87,"column":0},"generated":{"line":2,"column":780}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":87,"column":0},"generated":{"line":2,"column":782}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":87,"column":0},"generated":{"line":2,"column":789}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":88,"column":0},"generated":{"line":2,"column":796}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":88,"column":0},"generated":{"line":2,"column":798}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":88,"column":0},"generated":{"line":2,"column":800}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":90,"column":0},"generated":{"line":2,"column":807}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":90,"column":0},"generated":{"line":2,"column":810}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":94,"column":0},"generated":{"line":2,"column":812}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":94,"column":0},"generated":{"line":2,"column":816}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":94,"column":0},"generated":{"line":2,"column":819}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":94,"column":0},"generated":{"line":2,"column":821}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":96,"column":0},"generated":{"line":2,"column":824}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":96,"column":0},"generated":{"line":2,"column":826}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":96,"column":0},"generated":{"line":2,"column":828}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":96,"column":0},"generated":{"line":2,"column":838}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":96,"column":0},"generated":{"line":2,"column":842}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":96,"column":0},"generated":{"line":2,"column":844}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":96,"column":0},"generated":{"line":2,"column":846}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":96,"column":0},"generated":{"line":2,"column":848}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":98,"column":0},"generated":{"line":2,"column":852}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":98,"column":0},"generated":{"line":2,"column":854}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":98,"column":0},"generated":{"line":2,"column":860}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":99,"column":0},"generated":{"line":2,"column":864}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":99,"column":0},"generated":{"line":2,"column":868}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":100,"column":0},"generated":{"line":2,"column":872}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":100,"column":0},"generated":{"line":2,"column":878}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":101,"column":0},"generated":{"line":2,"column":882}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":101,"column":0},"generated":{"line":2,"column":884}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":101,"column":0},"generated":{"line":2,"column":888}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":101,"column":0},"generated":{"line":2,"column":890}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":101,"column":0},"generated":{"line":2,"column":892}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":102,"column":0},"generated":{"line":2,"column":934}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":102,"column":0},"generated":{"line":2,"column":936}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":102,"column":0},"generated":{"line":2,"column":939}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":114,"column":0},"generated":{"line":2,"column":947}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":114,"column":0},"generated":{"line":2,"column":948}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":114,"column":0},"generated":{"line":2,"column":950}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":119,"column":0},"generated":{"line":2,"column":961}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":119,"column":0},"generated":{"line":2,"column":965}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":119,"column":0},"generated":{"line":2,"column":967}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":119,"column":0},"generated":{"line":2,"column":976}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":119,"column":0},"generated":{"line":2,"column":978}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":122,"column":0},"generated":{"line":2,"column":981}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":120,"column":0},"generated":{"line":2,"column":985}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":120,"column":0},"generated":{"line":2,"column":989}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":120,"column":0},"generated":{"line":2,"column":992}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":122,"column":0},"generated":{"line":2,"column":994}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":122,"column":0},"generated":{"line":2,"column":996}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":122,"column":0},"generated":{"line":2,"column":998}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":122,"column":0},"generated":{"line":2,"column":1000}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":122,"column":0},"generated":{"line":2,"column":1002}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":122,"column":0},"generated":{"line":2,"column":1009}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":123,"column":0},"generated":{"line":2,"column":1013}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":123,"column":0},"generated":{"line":2,"column":1016}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":123,"column":0},"generated":{"line":2,"column":1018}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":123,"column":0},"generated":{"line":2,"column":1021}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":123,"column":0},"generated":{"line":2,"column":1027}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":123,"column":0},"generated":{"line":2,"column":1030}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":124,"column":0},"generated":{"line":2,"column":1031}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":124,"column":0},"generated":{"line":2,"column":1034}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":125,"column":0},"generated":{"line":2,"column":1036}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":129,"column":0},"generated":{"line":2,"column":1042}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":129,"column":0},"generated":{"line":2,"column":1045}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":129,"column":0},"generated":{"line":2,"column":1047}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":129,"column":0},"generated":{"line":2,"column":1052}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":138,"column":0},"generated":{"line":2,"column":1056}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":138,"column":0},"generated":{"line":2,"column":1058}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":138,"column":0},"generated":{"line":2,"column":1068}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":138,"column":0},"generated":{"line":2,"column":1075}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":138,"column":0},"generated":{"line":2,"column":1084}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":139,"column":0},"generated":{"line":2,"column":1087}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":139,"column":0},"generated":{"line":2,"column":1092}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":139,"column":0},"generated":{"line":2,"column":1102}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":139,"column":0},"generated":{"line":2,"column":1107}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":139,"column":0},"generated":{"line":2,"column":1117}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":139,"column":0},"generated":{"line":2,"column":1124}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":139,"column":0},"generated":{"line":2,"column":1133}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":140,"column":0},"generated":{"line":2,"column":1136}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":140,"column":0},"generated":{"line":2,"column":1143}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":140,"column":0},"generated":{"line":2,"column":1145}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":140,"column":0},"generated":{"line":2,"column":1150}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":152,"column":0},"generated":{"line":2,"column":1155}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":152,"column":0},"generated":{"line":2,"column":1157}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":152,"column":0},"generated":{"line":2,"column":1167}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":152,"column":0},"generated":{"line":2,"column":1182}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":152,"column":0},"generated":{"line":2,"column":1191}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":152,"column":0},"generated":{"line":2,"column":1193}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":152,"column":0},"generated":{"line":2,"column":1195}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":153,"column":0},"generated":{"line":2,"column":1198}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":153,"column":0},"generated":{"line":2,"column":1202}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":153,"column":0},"generated":{"line":2,"column":1204}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":153,"column":0},"generated":{"line":2,"column":1209}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":153,"column":0},"generated":{"line":2,"column":1219}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":153,"column":0},"generated":{"line":2,"column":1225}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":154,"column":0},"generated":{"line":2,"column":1228}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":154,"column":0},"generated":{"line":2,"column":1230}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":154,"column":0},"generated":{"line":2,"column":1232}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":155,"column":0},"generated":{"line":2,"column":1239}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":155,"column":0},"generated":{"line":2,"column":1242}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":155,"column":0},"generated":{"line":2,"column":1246}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":155,"column":0},"generated":{"line":2,"column":1248}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":155,"column":0},"generated":{"line":2,"column":1255}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":155,"column":0},"generated":{"line":2,"column":1257}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":155,"column":0},"generated":{"line":2,"column":1262}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":157,"column":0},"generated":{"line":2,"column":1268}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":157,"column":0},"generated":{"line":2,"column":1272}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":157,"column":0},"generated":{"line":2,"column":1276}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":157,"column":0},"generated":{"line":2,"column":1278}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":157,"column":0},"generated":{"line":2,"column":1280}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":157,"column":0},"generated":{"line":2,"column":1282}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":157,"column":0},"generated":{"line":2,"column":1284}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":157,"column":0},"generated":{"line":2,"column":1291}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":158,"column":0},"generated":{"line":2,"column":1295}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":158,"column":0},"generated":{"line":2,"column":1300}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":159,"column":0},"generated":{"line":2,"column":1305}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":160,"column":0},"generated":{"line":2,"column":1307}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":161,"column":0},"generated":{"line":2,"column":1309}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":161,"column":0},"generated":{"line":2,"column":1311}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":161,"column":0},"generated":{"line":2,"column":1314}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":162,"column":0},"generated":{"line":2,"column":1317}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":162,"column":0},"generated":{"line":2,"column":1319}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":162,"column":0},"generated":{"line":2,"column":1322}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":163,"column":0},"generated":{"line":2,"column":1331}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":163,"column":0},"generated":{"line":2,"column":1333}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":163,"column":0},"generated":{"line":2,"column":1336}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":164,"column":0},"generated":{"line":2,"column":1345}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":164,"column":0},"generated":{"line":2,"column":1354}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":167,"column":0},"generated":{"line":2,"column":1357}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":165,"column":0},"generated":{"line":2,"column":1362}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":165,"column":0},"generated":{"line":2,"column":1365}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":168,"column":0},"generated":{"line":2,"column":1369}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":168,"column":0},"generated":{"line":2,"column":1371}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":168,"column":0},"generated":{"line":2,"column":1373}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":183,"column":0},"generated":{"line":2,"column":1382}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":183,"column":0},"generated":{"line":2,"column":1389}},{"source":"node_modules/mongodb-core/lib/auth/plain.js","original":{"line":183,"column":0},"generated":{"line":2,"column":1397}}],"sources":{"node_modules/mongodb-core/lib/auth/plain.js":"'use strict';\n\nvar f = require('util').format,\n  retrieveBSON = require('../connection/utils').retrieveBSON,\n  Query = require('../connection/commands').Query,\n  MongoError = require('../error').MongoError;\n\nvar BSON = retrieveBSON(),\n  Binary = BSON.Binary;\n\nvar AuthSession = function(db, username, password) {\n  this.db = db;\n  this.username = username;\n  this.password = password;\n};\n\nAuthSession.prototype.equal = function(session) {\n  return (\n    session.db === this.db &&\n    session.username === this.username &&\n    session.password === this.password\n  );\n};\n\n/**\n * Creates a new Plain authentication mechanism\n * @class\n * @return {Plain} A cursor instance\n */\nvar Plain = function(bson) {\n  this.bson = bson;\n  this.authStore = [];\n};\n\n/**\n * Authenticate\n * @method\n * @param {{Server}|{ReplSet}|{Mongos}} server Topology the authentication method is being called on\n * @param {[]Connections} connections Connections to authenticate using this authenticator\n * @param {string} db Name of the database\n * @param {string} username Username\n * @param {string} password Password\n * @param {authResultCallback} callback The callback to return the result from the authentication\n * @return {object}\n */\nPlain.prototype.auth = function(server, connections, db, username, password, callback) {\n  var self = this;\n  // Total connections\n  var count = connections.length;\n  if (count === 0) return callback(null, null);\n\n  // Valid connections\n  var numberOfValidConnections = 0;\n  var errorObject = null;\n\n  // For each connection we need to authenticate\n  while (connections.length > 0) {\n    // Execute MongoCR\n    var execute = function(connection) {\n      // Create payload\n      var payload = new Binary(f('\\x00%s\\x00%s', username, password));\n\n      // Let's start the sasl process\n      var command = {\n        saslStart: 1,\n        mechanism: 'PLAIN',\n        payload: payload,\n        autoAuthorize: 1\n      };\n\n      // Let's start the process\n      server(\n        connection,\n        new Query(self.bson, '$external.$cmd', command, {\n          numberToSkip: 0,\n          numberToReturn: 1\n        }),\n        function(err, r) {\n          // Adjust count\n          count = count - 1;\n\n          // If we have an error\n          if (err) {\n            errorObject = err;\n          } else if (r.result['$err']) {\n            errorObject = r.result;\n          } else if (r.result['errmsg']) {\n            errorObject = r.result;\n          } else {\n            numberOfValidConnections = numberOfValidConnections + 1;\n          }\n\n          // We have authenticated all connections\n          if (count === 0 && numberOfValidConnections > 0) {\n            // Store the auth details\n            addAuthSession(self.authStore, new AuthSession(db, username, password));\n            // Return correct authentication\n            callback(null, true);\n          } else if (count === 0) {\n            if (errorObject == null)\n              errorObject = new MongoError(f('failed to authenticate using mongocr'));\n            callback(errorObject, false);\n          }\n        }\n      );\n    };\n\n    var _execute = function(_connection) {\n      process.nextTick(function() {\n        execute(_connection);\n      });\n    };\n\n    _execute(connections.shift());\n  }\n};\n\n// Add to store only if it does not exist\nvar addAuthSession = function(authStore, session) {\n  var found = false;\n\n  for (var i = 0; i < authStore.length; i++) {\n    if (authStore[i].equal(session)) {\n      found = true;\n      break;\n    }\n  }\n\n  if (!found) authStore.push(session);\n};\n\n/**\n * Remove authStore credentials\n * @method\n * @param {string} db Name of database we are removing authStore details about\n * @return {object}\n */\nPlain.prototype.logout = function(dbName) {\n  this.authStore = this.authStore.filter(function(x) {\n    return x.db !== dbName;\n  });\n};\n\n/**\n * Re authenticate pool\n * @method\n * @param {{Server}|{ReplSet}|{Mongos}} server Topology the authentication method is being called on\n * @param {[]Connections} connections Connections to authenticate using this authenticator\n * @param {authResultCallback} callback The callback to return the result from the authentication\n * @return {object}\n */\nPlain.prototype.reauthenticate = function(server, connections, callback) {\n  var authStore = this.authStore.slice(0);\n  var count = authStore.length;\n  if (count === 0) return callback(null, null);\n  // Iterate over all the auth details stored\n  for (var i = 0; i < authStore.length; i++) {\n    this.auth(\n      server,\n      connections,\n      authStore[i].db,\n      authStore[i].username,\n      authStore[i].password,\n      function(err) {\n        count = count - 1;\n        // Done re-authenticating\n        if (count === 0) {\n          callback(err, null);\n        }\n      }\n    );\n  }\n};\n\n/**\n * This is a result from a authentication strategy\n *\n * @callback authResultCallback\n * @param {error} error An error object. Set to null if no error present\n * @param {boolean} result The result of the authentication process\n */\n\nmodule.exports = Plain;\n"},"lineCount":null}},"hash":"5f799d6ea8cda0657aa11324d1298f18","cacheData":{"env":{}}}