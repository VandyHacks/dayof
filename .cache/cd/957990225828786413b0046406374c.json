{"id":"quUe","dependencies":[{"name":"C:\\Users\\kzhai\\VandyHacks\\vandyhacksnotifications\\package.json","includedInParent":true,"mtime":1540882116534},{"name":"C:\\Users\\kzhai\\VandyHacks\\vandyhacksnotifications\\.babelrc","includedInParent":true,"mtime":1540875229523},{"name":"C:\\Users\\kzhai\\VandyHacks\\vandyhacksnotifications\\node_modules\\mongodb-core\\package.json","includedInParent":true,"mtime":1539064513292},{"name":"util","loc":{"line":3,"column":16},"parent":"C:\\Users\\kzhai\\VandyHacks\\vandyhacksnotifications\\node_modules\\mongodb-core\\lib\\auth\\x509.js","resolved":"C:\\Users\\kzhai\\VandyHacks\\vandyhacksnotifications\\node_modules\\util\\util.js"},{"name":"../connection/commands","loc":{"line":4,"column":18},"parent":"C:\\Users\\kzhai\\VandyHacks\\vandyhacksnotifications\\node_modules\\mongodb-core\\lib\\auth\\x509.js","resolved":"C:\\Users\\kzhai\\VandyHacks\\vandyhacksnotifications\\node_modules\\mongodb-core\\lib\\connection\\commands.js"},{"name":"../error","loc":{"line":5,"column":23},"parent":"C:\\Users\\kzhai\\VandyHacks\\vandyhacksnotifications\\node_modules\\mongodb-core\\lib\\auth\\x509.js","resolved":"C:\\Users\\kzhai\\VandyHacks\\vandyhacksnotifications\\node_modules\\mongodb-core\\lib\\error.js"},{"name":"process","parent":"C:\\Users\\kzhai\\VandyHacks\\vandyhacksnotifications\\node_modules\\mongodb-core\\lib\\auth\\x509.js","resolved":"C:\\Users\\kzhai\\VandyHacks\\vandyhacksnotifications\\node_modules\\process\\browser.js"}],"generated":{"js":"var process = require(\"process\");\nvar t=require(\"process\"),r=require(\"util\").format,e=require(\"../connection/commands\").Query,n=require(\"../error\").MongoError,u=function(t,r,e){this.db=t,this.username=r,this.password=e};u.prototype.equal=function(t){return t.db===this.db&&t.username===this.username&&t.password===this.password};var o=function(t){this.bson=t,this.authStore=[]};o.prototype.auth=function(o,s,a,l,h,c){var f=this,p=s.length;if(0===p)return c(null,null);for(var m=0,d=null;s.length>0;){!function(s){t.nextTick(function(){var t,b;t=s,b={authenticate:1,mechanism:\"MONGODB-X509\"},l&&(b.user=l),o(t,new e(f.bson,\"$external.$cmd\",b,{numberToSkip:0,numberToReturn:1}),function(t,e){p-=1,t?d=t:e.result.$err?d=e.result:e.result.errmsg?d=e.result:m+=1,0===p&&m>0?(i(f.authStore,new u(a,l,h)),c(null,!0)):0===p&&(null==d&&(d=new n(r(\"failed to authenticate using mongocr\"))),c(d,!1))})})}(s.shift())}};var i=function(t,r){for(var e=!1,n=0;n<t.length;n++)if(t[n].equal(r)){e=!0;break}e||t.push(r)};o.prototype.logout=function(t){this.authStore=this.authStore.filter(function(r){return r.db!==t})},o.prototype.reauthenticate=function(t,r,e){var n=this.authStore.slice(0),u=n.length;if(0===u)return e(null,null);for(var o=0;o<n.length;o++)this.auth(t,r,n[o].db,n[o].username,n[o].password,function(t){0===(u-=1)&&e(t,null)})},module.exports=o;","map":{"mappings":[{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":180,"column":0},"generated":{"line":2,"column":0}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":180,"column":0},"generated":{"line":2,"column":4}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":180,"column":0},"generated":{"line":2,"column":6}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":180,"column":0},"generated":{"line":2,"column":14}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":3,"column":0},"generated":{"line":2,"column":25}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":3,"column":0},"generated":{"line":2,"column":27}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":3,"column":0},"generated":{"line":2,"column":35}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":3,"column":0},"generated":{"line":2,"column":43}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":4,"column":0},"generated":{"line":2,"column":50}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":4,"column":0},"generated":{"line":2,"column":52}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":4,"column":0},"generated":{"line":2,"column":60}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":4,"column":0},"generated":{"line":2,"column":86}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":5,"column":0},"generated":{"line":2,"column":92}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":5,"column":0},"generated":{"line":2,"column":94}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":5,"column":0},"generated":{"line":2,"column":102}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":5,"column":0},"generated":{"line":2,"column":114}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":7,"column":0},"generated":{"line":2,"column":125}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":7,"column":0},"generated":{"line":2,"column":127}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":7,"column":0},"generated":{"line":2,"column":136}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":7,"column":0},"generated":{"line":2,"column":138}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":7,"column":0},"generated":{"line":2,"column":140}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":8,"column":0},"generated":{"line":2,"column":143}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":8,"column":0},"generated":{"line":2,"column":148}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":8,"column":0},"generated":{"line":2,"column":151}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":9,"column":0},"generated":{"line":2,"column":153}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":9,"column":0},"generated":{"line":2,"column":158}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":9,"column":0},"generated":{"line":2,"column":167}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":10,"column":0},"generated":{"line":2,"column":169}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":10,"column":0},"generated":{"line":2,"column":174}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":10,"column":0},"generated":{"line":2,"column":183}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":13,"column":0},"generated":{"line":2,"column":186}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":13,"column":0},"generated":{"line":2,"column":188}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":13,"column":0},"generated":{"line":2,"column":198}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":13,"column":0},"generated":{"line":2,"column":204}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":13,"column":0},"generated":{"line":2,"column":213}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":14,"column":0},"generated":{"line":2,"column":216}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":15,"column":0},"generated":{"line":2,"column":223}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":15,"column":0},"generated":{"line":2,"column":225}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":15,"column":0},"generated":{"line":2,"column":230}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":15,"column":0},"generated":{"line":2,"column":235}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":16,"column":0},"generated":{"line":2,"column":239}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":16,"column":0},"generated":{"line":2,"column":241}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":16,"column":0},"generated":{"line":2,"column":252}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":16,"column":0},"generated":{"line":2,"column":257}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":17,"column":0},"generated":{"line":2,"column":267}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":17,"column":0},"generated":{"line":2,"column":269}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":17,"column":0},"generated":{"line":2,"column":280}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":17,"column":0},"generated":{"line":2,"column":285}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":26,"column":0},"generated":{"line":2,"column":295}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":26,"column":0},"generated":{"line":2,"column":299}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":26,"column":0},"generated":{"line":2,"column":301}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":26,"column":0},"generated":{"line":2,"column":310}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":27,"column":0},"generated":{"line":2,"column":313}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":27,"column":0},"generated":{"line":2,"column":318}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":27,"column":0},"generated":{"line":2,"column":323}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":28,"column":0},"generated":{"line":2,"column":325}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":28,"column":0},"generated":{"line":2,"column":330}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":28,"column":0},"generated":{"line":2,"column":340}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":42,"column":0},"generated":{"line":2,"column":344}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":42,"column":0},"generated":{"line":2,"column":346}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":42,"column":0},"generated":{"line":2,"column":356}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":42,"column":0},"generated":{"line":2,"column":361}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":42,"column":0},"generated":{"line":2,"column":370}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":42,"column":0},"generated":{"line":2,"column":372}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":42,"column":0},"generated":{"line":2,"column":374}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":42,"column":0},"generated":{"line":2,"column":376}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":42,"column":0},"generated":{"line":2,"column":378}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":42,"column":0},"generated":{"line":2,"column":380}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":43,"column":0},"generated":{"line":2,"column":383}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":43,"column":0},"generated":{"line":2,"column":387}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":43,"column":0},"generated":{"line":2,"column":389}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":45,"column":0},"generated":{"line":2,"column":394}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":45,"column":0},"generated":{"line":2,"column":396}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":45,"column":0},"generated":{"line":2,"column":398}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":46,"column":0},"generated":{"line":2,"column":405}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":46,"column":0},"generated":{"line":2,"column":408}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":46,"column":0},"generated":{"line":2,"column":412}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":46,"column":0},"generated":{"line":2,"column":414}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":46,"column":0},"generated":{"line":2,"column":421}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":46,"column":0},"generated":{"line":2,"column":423}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":46,"column":0},"generated":{"line":2,"column":428}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":53,"column":0},"generated":{"line":2,"column":434}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":49,"column":0},"generated":{"line":2,"column":438}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":49,"column":0},"generated":{"line":2,"column":442}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":49,"column":0},"generated":{"line":2,"column":444}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":50,"column":0},"generated":{"line":2,"column":446}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":50,"column":0},"generated":{"line":2,"column":448}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":53,"column":0},"generated":{"line":2,"column":453}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":53,"column":0},"generated":{"line":2,"column":455}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":53,"column":0},"generated":{"line":2,"column":462}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":53,"column":0},"generated":{"line":2,"column":465}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":104,"column":0},"generated":{"line":2,"column":467}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":104,"column":0},"generated":{"line":2,"column":476}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":105,"column":0},"generated":{"line":2,"column":479}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":105,"column":0},"generated":{"line":2,"column":481}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":105,"column":0},"generated":{"line":2,"column":490}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":55,"column":0},"generated":{"line":2,"column":501}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":55,"column":0},"generated":{"line":2,"column":505}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":57,"column":0},"generated":{"line":2,"column":507}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":55,"column":0},"generated":{"line":2,"column":509}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":106,"column":0},"generated":{"line":2,"column":511}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":57,"column":0},"generated":{"line":2,"column":513}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":57,"column":0},"generated":{"line":2,"column":515}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":58,"column":0},"generated":{"line":2,"column":516}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":58,"column":0},"generated":{"line":2,"column":529}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":59,"column":0},"generated":{"line":2,"column":531}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":59,"column":0},"generated":{"line":2,"column":541}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":63,"column":0},"generated":{"line":2,"column":557}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":64,"column":0},"generated":{"line":2,"column":561}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":64,"column":0},"generated":{"line":2,"column":563}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":64,"column":0},"generated":{"line":2,"column":568}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":68,"column":0},"generated":{"line":2,"column":571}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":69,"column":0},"generated":{"line":2,"column":573}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":70,"column":0},"generated":{"line":2,"column":575}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":70,"column":0},"generated":{"line":2,"column":579}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":70,"column":0},"generated":{"line":2,"column":581}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":70,"column":0},"generated":{"line":2,"column":583}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":70,"column":0},"generated":{"line":2,"column":588}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":70,"column":0},"generated":{"line":2,"column":605}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":70,"column":0},"generated":{"line":2,"column":607}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":71,"column":0},"generated":{"line":2,"column":608}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":71,"column":0},"generated":{"line":2,"column":621}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":72,"column":0},"generated":{"line":2,"column":623}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":72,"column":0},"generated":{"line":2,"column":638}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":74,"column":0},"generated":{"line":2,"column":642}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":74,"column":0},"generated":{"line":2,"column":651}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":74,"column":0},"generated":{"line":2,"column":653}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":76,"column":0},"generated":{"line":2,"column":656}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":76,"column":0},"generated":{"line":2,"column":659}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":79,"column":0},"generated":{"line":2,"column":661}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":80,"column":0},"generated":{"line":2,"column":663}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":80,"column":0},"generated":{"line":2,"column":665}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":81,"column":0},"generated":{"line":2,"column":667}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":81,"column":0},"generated":{"line":2,"column":669}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":81,"column":0},"generated":{"line":2,"column":676}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":82,"column":0},"generated":{"line":2,"column":681}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":82,"column":0},"generated":{"line":2,"column":683}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":82,"column":0},"generated":{"line":2,"column":685}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":83,"column":0},"generated":{"line":2,"column":692}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":83,"column":0},"generated":{"line":2,"column":694}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":83,"column":0},"generated":{"line":2,"column":701}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":84,"column":0},"generated":{"line":2,"column":708}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":84,"column":0},"generated":{"line":2,"column":710}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":84,"column":0},"generated":{"line":2,"column":712}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":86,"column":0},"generated":{"line":2,"column":719}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":86,"column":0},"generated":{"line":2,"column":722}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":90,"column":0},"generated":{"line":2,"column":724}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":90,"column":0},"generated":{"line":2,"column":728}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":90,"column":0},"generated":{"line":2,"column":731}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":90,"column":0},"generated":{"line":2,"column":733}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":92,"column":0},"generated":{"line":2,"column":736}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":92,"column":0},"generated":{"line":2,"column":738}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":92,"column":0},"generated":{"line":2,"column":740}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":92,"column":0},"generated":{"line":2,"column":750}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":92,"column":0},"generated":{"line":2,"column":754}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":92,"column":0},"generated":{"line":2,"column":756}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":92,"column":0},"generated":{"line":2,"column":758}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":92,"column":0},"generated":{"line":2,"column":760}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":94,"column":0},"generated":{"line":2,"column":764}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":94,"column":0},"generated":{"line":2,"column":766}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":94,"column":0},"generated":{"line":2,"column":772}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":95,"column":0},"generated":{"line":2,"column":776}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":95,"column":0},"generated":{"line":2,"column":780}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":96,"column":0},"generated":{"line":2,"column":784}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":96,"column":0},"generated":{"line":2,"column":790}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":97,"column":0},"generated":{"line":2,"column":794}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":97,"column":0},"generated":{"line":2,"column":796}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":97,"column":0},"generated":{"line":2,"column":800}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":97,"column":0},"generated":{"line":2,"column":802}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":97,"column":0},"generated":{"line":2,"column":804}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":98,"column":0},"generated":{"line":2,"column":846}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":98,"column":0},"generated":{"line":2,"column":848}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":98,"column":0},"generated":{"line":2,"column":851}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":110,"column":0},"generated":{"line":2,"column":859}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":110,"column":0},"generated":{"line":2,"column":860}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":110,"column":0},"generated":{"line":2,"column":862}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":115,"column":0},"generated":{"line":2,"column":873}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":115,"column":0},"generated":{"line":2,"column":877}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":115,"column":0},"generated":{"line":2,"column":879}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":115,"column":0},"generated":{"line":2,"column":888}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":115,"column":0},"generated":{"line":2,"column":890}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":118,"column":0},"generated":{"line":2,"column":893}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":116,"column":0},"generated":{"line":2,"column":897}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":116,"column":0},"generated":{"line":2,"column":901}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":116,"column":0},"generated":{"line":2,"column":904}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":118,"column":0},"generated":{"line":2,"column":906}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":118,"column":0},"generated":{"line":2,"column":908}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":118,"column":0},"generated":{"line":2,"column":910}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":118,"column":0},"generated":{"line":2,"column":912}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":118,"column":0},"generated":{"line":2,"column":914}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":118,"column":0},"generated":{"line":2,"column":921}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":119,"column":0},"generated":{"line":2,"column":925}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":119,"column":0},"generated":{"line":2,"column":928}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":119,"column":0},"generated":{"line":2,"column":930}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":119,"column":0},"generated":{"line":2,"column":933}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":119,"column":0},"generated":{"line":2,"column":939}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":119,"column":0},"generated":{"line":2,"column":942}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":120,"column":0},"generated":{"line":2,"column":943}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":120,"column":0},"generated":{"line":2,"column":946}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":121,"column":0},"generated":{"line":2,"column":948}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":125,"column":0},"generated":{"line":2,"column":954}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":125,"column":0},"generated":{"line":2,"column":957}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":125,"column":0},"generated":{"line":2,"column":959}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":125,"column":0},"generated":{"line":2,"column":964}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":134,"column":0},"generated":{"line":2,"column":968}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":134,"column":0},"generated":{"line":2,"column":970}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":134,"column":0},"generated":{"line":2,"column":980}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":134,"column":0},"generated":{"line":2,"column":987}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":134,"column":0},"generated":{"line":2,"column":996}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":135,"column":0},"generated":{"line":2,"column":999}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":135,"column":0},"generated":{"line":2,"column":1004}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":135,"column":0},"generated":{"line":2,"column":1014}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":135,"column":0},"generated":{"line":2,"column":1019}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":135,"column":0},"generated":{"line":2,"column":1029}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":135,"column":0},"generated":{"line":2,"column":1036}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":135,"column":0},"generated":{"line":2,"column":1045}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":136,"column":0},"generated":{"line":2,"column":1048}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":136,"column":0},"generated":{"line":2,"column":1055}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":136,"column":0},"generated":{"line":2,"column":1057}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":136,"column":0},"generated":{"line":2,"column":1062}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":148,"column":0},"generated":{"line":2,"column":1067}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":148,"column":0},"generated":{"line":2,"column":1069}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":148,"column":0},"generated":{"line":2,"column":1079}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":148,"column":0},"generated":{"line":2,"column":1094}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":148,"column":0},"generated":{"line":2,"column":1103}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":148,"column":0},"generated":{"line":2,"column":1105}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":148,"column":0},"generated":{"line":2,"column":1107}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":149,"column":0},"generated":{"line":2,"column":1110}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":149,"column":0},"generated":{"line":2,"column":1114}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":149,"column":0},"generated":{"line":2,"column":1116}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":149,"column":0},"generated":{"line":2,"column":1121}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":149,"column":0},"generated":{"line":2,"column":1131}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":149,"column":0},"generated":{"line":2,"column":1137}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":150,"column":0},"generated":{"line":2,"column":1140}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":150,"column":0},"generated":{"line":2,"column":1142}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":150,"column":0},"generated":{"line":2,"column":1144}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":151,"column":0},"generated":{"line":2,"column":1151}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":151,"column":0},"generated":{"line":2,"column":1154}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":151,"column":0},"generated":{"line":2,"column":1158}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":151,"column":0},"generated":{"line":2,"column":1160}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":151,"column":0},"generated":{"line":2,"column":1167}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":151,"column":0},"generated":{"line":2,"column":1169}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":151,"column":0},"generated":{"line":2,"column":1174}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":153,"column":0},"generated":{"line":2,"column":1180}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":153,"column":0},"generated":{"line":2,"column":1184}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":153,"column":0},"generated":{"line":2,"column":1188}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":153,"column":0},"generated":{"line":2,"column":1190}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":153,"column":0},"generated":{"line":2,"column":1192}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":153,"column":0},"generated":{"line":2,"column":1194}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":153,"column":0},"generated":{"line":2,"column":1196}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":153,"column":0},"generated":{"line":2,"column":1203}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":154,"column":0},"generated":{"line":2,"column":1207}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":154,"column":0},"generated":{"line":2,"column":1212}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":155,"column":0},"generated":{"line":2,"column":1217}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":156,"column":0},"generated":{"line":2,"column":1219}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":157,"column":0},"generated":{"line":2,"column":1221}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":157,"column":0},"generated":{"line":2,"column":1223}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":157,"column":0},"generated":{"line":2,"column":1226}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":158,"column":0},"generated":{"line":2,"column":1229}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":158,"column":0},"generated":{"line":2,"column":1231}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":158,"column":0},"generated":{"line":2,"column":1234}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":159,"column":0},"generated":{"line":2,"column":1243}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":159,"column":0},"generated":{"line":2,"column":1245}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":159,"column":0},"generated":{"line":2,"column":1248}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":160,"column":0},"generated":{"line":2,"column":1257}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":160,"column":0},"generated":{"line":2,"column":1266}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":163,"column":0},"generated":{"line":2,"column":1269}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":161,"column":0},"generated":{"line":2,"column":1274}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":161,"column":0},"generated":{"line":2,"column":1277}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":164,"column":0},"generated":{"line":2,"column":1281}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":164,"column":0},"generated":{"line":2,"column":1283}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":164,"column":0},"generated":{"line":2,"column":1285}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":179,"column":0},"generated":{"line":2,"column":1294}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":179,"column":0},"generated":{"line":2,"column":1301}},{"source":"node_modules/mongodb-core/lib/auth/x509.js","original":{"line":179,"column":0},"generated":{"line":2,"column":1309}}],"sources":{"node_modules/mongodb-core/lib/auth/x509.js":"'use strict';\n\nvar f = require('util').format,\n  Query = require('../connection/commands').Query,\n  MongoError = require('../error').MongoError;\n\nvar AuthSession = function(db, username, password) {\n  this.db = db;\n  this.username = username;\n  this.password = password;\n};\n\nAuthSession.prototype.equal = function(session) {\n  return (\n    session.db === this.db &&\n    session.username === this.username &&\n    session.password === this.password\n  );\n};\n\n/**\n * Creates a new X509 authentication mechanism\n * @class\n * @return {X509} A cursor instance\n */\nvar X509 = function(bson) {\n  this.bson = bson;\n  this.authStore = [];\n};\n\n/**\n * Authenticate\n * @method\n * @param {{Server}|{ReplSet}|{Mongos}} server Topology the authentication method is being called on\n * @param {[]Connections} connections Connections to authenticate using this authenticator\n * @param {string} db Name of the database\n * @param {string} username Username\n * @param {string} password Password\n * @param {authResultCallback} callback The callback to return the result from the authentication\n * @return {object}\n */\nX509.prototype.auth = function(server, connections, db, username, password, callback) {\n  var self = this;\n  // Total connections\n  var count = connections.length;\n  if (count === 0) return callback(null, null);\n\n  // Valid connections\n  var numberOfValidConnections = 0;\n  var errorObject = null;\n\n  // For each connection we need to authenticate\n  while (connections.length > 0) {\n    // Execute MongoCR\n    var execute = function(connection) {\n      // Let's start the sasl process\n      var command = {\n        authenticate: 1,\n        mechanism: 'MONGODB-X509'\n      };\n\n      // Add username if specified\n      if (username) {\n        command.user = username;\n      }\n\n      // Let's start the process\n      server(\n        connection,\n        new Query(self.bson, '$external.$cmd', command, {\n          numberToSkip: 0,\n          numberToReturn: 1\n        }),\n        function(err, r) {\n          // Adjust count\n          count = count - 1;\n\n          // If we have an error\n          if (err) {\n            errorObject = err;\n          } else if (r.result['$err']) {\n            errorObject = r.result;\n          } else if (r.result['errmsg']) {\n            errorObject = r.result;\n          } else {\n            numberOfValidConnections = numberOfValidConnections + 1;\n          }\n\n          // We have authenticated all connections\n          if (count === 0 && numberOfValidConnections > 0) {\n            // Store the auth details\n            addAuthSession(self.authStore, new AuthSession(db, username, password));\n            // Return correct authentication\n            callback(null, true);\n          } else if (count === 0) {\n            if (errorObject == null)\n              errorObject = new MongoError(f('failed to authenticate using mongocr'));\n            callback(errorObject, false);\n          }\n        }\n      );\n    };\n\n    var _execute = function(_connection) {\n      process.nextTick(function() {\n        execute(_connection);\n      });\n    };\n\n    _execute(connections.shift());\n  }\n};\n\n// Add to store only if it does not exist\nvar addAuthSession = function(authStore, session) {\n  var found = false;\n\n  for (var i = 0; i < authStore.length; i++) {\n    if (authStore[i].equal(session)) {\n      found = true;\n      break;\n    }\n  }\n\n  if (!found) authStore.push(session);\n};\n\n/**\n * Remove authStore credentials\n * @method\n * @param {string} db Name of database we are removing authStore details about\n * @return {object}\n */\nX509.prototype.logout = function(dbName) {\n  this.authStore = this.authStore.filter(function(x) {\n    return x.db !== dbName;\n  });\n};\n\n/**\n * Re authenticate pool\n * @method\n * @param {{Server}|{ReplSet}|{Mongos}} server Topology the authentication method is being called on\n * @param {[]Connections} connections Connections to authenticate using this authenticator\n * @param {authResultCallback} callback The callback to return the result from the authentication\n * @return {object}\n */\nX509.prototype.reauthenticate = function(server, connections, callback) {\n  var authStore = this.authStore.slice(0);\n  var count = authStore.length;\n  if (count === 0) return callback(null, null);\n  // Iterate over all the auth details stored\n  for (var i = 0; i < authStore.length; i++) {\n    this.auth(\n      server,\n      connections,\n      authStore[i].db,\n      authStore[i].username,\n      authStore[i].password,\n      function(err) {\n        count = count - 1;\n        // Done re-authenticating\n        if (count === 0) {\n          callback(err, null);\n        }\n      }\n    );\n  }\n};\n\n/**\n * This is a result from a authentication strategy\n *\n * @callback authResultCallback\n * @param {error} error An error object. Set to null if no error present\n * @param {boolean} result The result of the authentication process\n */\n\nmodule.exports = X509;\n"},"lineCount":null}},"hash":"56297a44225dbcd315197667ed65e8a4","cacheData":{"env":{}}}